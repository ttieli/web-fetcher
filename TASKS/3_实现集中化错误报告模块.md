# 3_实现集中化错误报告模块

## 背景
- 现有失败处理散落在 `selenium_fetcher.py`、`webfetcher.py` 等处，缺乏统一结构，后续扩展（如 Playwright）时难以维护。
- 之前方案建议新增 `error_reporter.py`，封装错误分类、排错建议与 Markdown 生成。

## 目标
- 在项目中引入独立的错误报告模块，统一管理错误类型、排查步骤和输出模板。
- 为未来的多引擎扩展（Selenium、Playwright、CDP）提供一致的错误处理接口。

## 验收标准
1. 新增 `error_reporter.py`，提供：错误分类、排障建议、失败 Markdown 生成等能力。
2. `webfetcher.py` 与 `selenium_fetcher.py` 调用该模块输出错误信息，去除重复文案与散乱逻辑。
3. 通过单元测试验证至少三类错误（依赖缺失、调试端口无响应、页面加载超时）的分类和文案输出。
4. 文档更新，说明如何扩展新的错误类型及其对应解决方案。

## 实施步骤
1. **模块设计**：定义错误类型枚举/常量、对应的解决方案与 Markdown 模板；支持注入原始错误信息和上下文（URL、调试端口等）。
2. **代码集成**：在 Selenium 失败路径中调用该模块生成结构化结果（既可返回 Markdown，也可返回数据对象供终端使用）。
3. **测试覆盖**：新增模块级测试，并更新现有集成测试确保调用链正确。
4. **文档同步**：在 `TASKS/2.改进Selenium失败报告输出.md` 完成后，同步引用新模块说明；在 README 或开发文档中补充使用方式。

## 备注
- 建议在完成任务 1 与任务 2 后再推进本任务，避免上下游接口频繁调整。
- 可参考之前计划中的 `FailureMarkdownGenerator`、`TroubleshootingGuide` 等角色，但实现时保持最小可行集合。
