# ç”Ÿäº§ç¯å¢ƒå‚æ•°é—®é¢˜æ·±åº¦åˆ†ææŠ¥å‘Š

> **åˆ†ææ—¥æœŸ**: 2025-09-26  
> **é—®é¢˜æè¿°**: ç”¨æˆ·æŠ¥å‘Š `-s` å’Œ `-u` å‚æ•°æ— æ³•è¯†åˆ«  
> **åˆ†æå¸ˆ**: Archy-Principle-Architect  
> **å½“å‰çŠ¶æ€**: å·²å®šä½æ ¹æœ¬åŸå› ï¼Œå¾…éƒ¨ç½²  

---

## ä¸€ã€é—®é¢˜ç°è±¡

### ç”¨æˆ·æŠ¥å‘Šçš„å…·ä½“è¡¨ç°
```bash
# æˆåŠŸæ¡ˆä¾‹
wf URL                # âœ… æ­£å¸¸å·¥ä½œ

# å¤±è´¥æ¡ˆä¾‹  
wf URL -s            # âŒ é”™è¯¯: unrecognized arguments: -s
wf URL -u            # âŒ é”™è¯¯: unrecognized arguments: -u
wf --help            # âš ï¸ æ˜¾ç¤ºæ—§ç‰ˆæœ¬å‚æ•°ï¼ˆæ— -s/-u/-mï¼‰
```

---

## äºŒã€æ ¹æœ¬åŸå› åˆ†æ

### 1. ç‰ˆæœ¬ä¸ä¸€è‡´é—®é¢˜

**æ ¸å¿ƒå‘ç°**: ç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„ä»£ç ä¸å¼€å‘çš„åŠŸèƒ½ä¸åœ¨åŒä¸€åˆ†æ”¯

| ç¯å¢ƒ/åˆ†æ”¯ | å‚æ•°æ”¯æŒçŠ¶æ€ | æ–‡ä»¶è·¯å¾„ |
|---------|------------|---------|
| **å½“å‰è¿è¡Œç‰ˆæœ¬** | âŒ æ—  `-s/-u/-m` å‚æ•° | `test-phase1-params` åˆ†æ”¯ |
| **å¼€å‘ç‰ˆæœ¬** | âœ… æœ‰ `-s/-u/-m` å‚æ•° | `feature/config-driven-phase1` åˆ†æ”¯ |
| **ä¸»åˆ†æ”¯** | âŒ æ—  `-s/-u/-m` å‚æ•° | `main` åˆ†æ”¯ |

### 2. æŠ€æœ¯ç»†èŠ‚éªŒè¯

#### 2.1 å½“å‰ç¬¦å·é“¾æ¥çŠ¶æ€
```bash
/usr/local/bin/wf -> /Users/tieli/.../Web_Fetcher/wf.py
```
- é“¾æ¥æ­£ç¡®æŒ‡å‘é¡¹ç›®ç›®å½•
- wf.py é€šè¿‡ subprocess è°ƒç”¨ webfetcher.py

#### 2.2 å½“å‰åˆ†æ”¯çŠ¶æ€
```bash
å½“å‰åˆ†æ”¯: test-phase1-params
æœ€æ–°æäº¤: 37bb56a fix: resolve wf command symlink issue
```

#### 2.3 å‚æ•°å­˜åœ¨ä½ç½®ç¡®è®¤
é€šè¿‡ git æ£€æŸ¥å‘ç°ï¼š
```bash
# feature/config-driven-phase1 åˆ†æ”¯ä¸­çš„ webfetcher.py åŒ…å«ï¼š
ap.add_argument('--method', '-m', choices=['urllib', 'selenium', 'auto'])
ap.add_argument('-s', '--selenium', action='store_true')
ap.add_argument('-u', '--urllib', action='store_true')
```

### 3. é—®é¢˜äº§ç”Ÿè·¯å¾„

1. **Phase 1 å¼€å‘å·¥ä½œ**åœ¨ `feature/config-driven-phase1` åˆ†æ”¯å®Œæˆ
2. **å½“å‰å·¥ä½œç›®å½•**åˆ‡æ¢åˆ°äº† `test-phase1-params` åˆ†æ”¯è¿›è¡Œæµ‹è¯•
3. **è¯¥æµ‹è¯•åˆ†æ”¯**æ²¡æœ‰åŒ…å« `-s/-u/-m` å‚æ•°çš„å®ç°
4. **ç”Ÿäº§ç¯å¢ƒ**å› æ­¤è¿è¡Œçš„æ˜¯ä¸åŒ…å«æ–°å‚æ•°çš„ç‰ˆæœ¬

---

## ä¸‰ã€å½±å“èŒƒå›´è¯„ä¼°

### å—å½±å“çš„åŠŸèƒ½
- âŒ `-s/--selenium` å‚æ•°ï¼ˆSeleniumæ–¹æ³•å¿«æ·æ–¹å¼ï¼‰
- âŒ `-u/--urllib` å‚æ•°ï¼ˆurllibæ–¹æ³•å¿«æ·æ–¹å¼ï¼‰  
- âŒ `-m/--method` å‚æ•°ï¼ˆæ–¹æ³•é€‰æ‹©ï¼‰
- âŒ `--no-fallback` å‚æ•°ï¼ˆç¦ç”¨è‡ªåŠ¨é™çº§ï¼‰
- âœ… åŸºç¡€ URL è·å–åŠŸèƒ½ï¼ˆæ­£å¸¸å·¥ä½œï¼‰
- âœ… å…¶ä»–ç°æœ‰å‚æ•°ï¼ˆæ­£å¸¸å·¥ä½œï¼‰

### ç”¨æˆ·ä½“éªŒå½±å“
- æ— æ³•ä½¿ç”¨æ–°çš„ä¾¿æ·å‚æ•°é€‰æ‹©è·å–æ–¹æ³•
- å¿…é¡»ä¾èµ–è‡ªåŠ¨æ£€æµ‹æœºåˆ¶
- æ— æ³•å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šçš„è·å–æ–¹æ³•

---

## å››ã€è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šåˆ‡æ¢åˆ°åŠŸèƒ½åˆ†æ”¯ï¼ˆæ¨èï¼‰
**ä¼˜åŠ¿**: ç«‹å³å¯ç”¨ï¼Œä»£ç å·²å®Œæˆ  
**é£é™©**: éœ€è¦éªŒè¯åˆ†æ”¯ç¨³å®šæ€§

```bash
# æ‰§è¡Œæ­¥éª¤
cd /Users/tieli/Library/Mobile Documents/com~apple~CloudDocs/Project/Web_Fetcher
git checkout feature/config-driven-phase1

# éªŒè¯å‚æ•°
wf --help | grep -E "(-s|--selenium|-u|--urllib|-m|--method)"

# æµ‹è¯•åŠŸèƒ½
wf https://example.com -s  # æµ‹è¯•Seleniumæ¨¡å¼
wf https://example.com -u  # æµ‹è¯•urllibæ¨¡å¼
```

### æ–¹æ¡ˆBï¼šåˆå¹¶åŠŸèƒ½åˆ°å½“å‰åˆ†æ”¯
**ä¼˜åŠ¿**: ä¿æŒå½“å‰åˆ†æ”¯çš„å…¶ä»–ä¿®å¤  
**é£é™©**: å¯èƒ½å¼•å…¥åˆå¹¶å†²çª

```bash
# æ‰§è¡Œæ­¥éª¤
cd /Users/tieli/Library/Mobile Documents/com~apple~CloudDocs/Project/Web_Fetcher
git checkout test-phase1-params
git merge feature/config-driven-phase1 --no-ff

# è§£å†³å†²çªï¼ˆå¦‚æœ‰ï¼‰
# æµ‹è¯•åˆå¹¶åçš„åŠŸèƒ½
```

### æ–¹æ¡ˆCï¼šCherry-pick ç‰¹å®šæäº¤
**ä¼˜åŠ¿**: ç²¾ç¡®æ§åˆ¶å¼•å…¥çš„æ›´æ”¹  
**é£é™©**: éœ€è¦è¯†åˆ«æ­£ç¡®çš„æäº¤

```bash
# æ‰¾åˆ°æ·»åŠ å‚æ•°çš„æäº¤
git log feature/config-driven-phase1 --grep="add.*parameter\|selenium\|urllib" --oneline

# Cherry-pick ç›¸å…³æäº¤
git cherry-pick <commit-hash>
```

---

## äº”ã€ç«‹å³è¡ŒåŠ¨å»ºè®®

### 1. ç´§æ€¥ä¿®å¤æ­¥éª¤ï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰
```bash
# æ­¥éª¤1: åˆ‡æ¢åˆ°åŠŸèƒ½åˆ†æ”¯
cd /Users/tieli/Library/Mobile Documents/com~apple~CloudDocs/Project/Web_Fetcher
git checkout feature/config-driven-phase1

# æ­¥éª¤2: éªŒè¯å‚æ•°å­˜åœ¨
python webfetcher.py --help | grep -A2 "selenium\|urllib\|method"

# æ­¥éª¤3: æµ‹è¯•åŸºæœ¬åŠŸèƒ½
wf https://mp.weixin.qq.com/s/example -s  # æµ‹è¯•Selenium
wf https://mp.weixin.qq.com/s/example -u  # æµ‹è¯•urllib

# æ­¥éª¤4: å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œè€ƒè™‘åˆ›å»ºç¨³å®šæ ‡ç­¾
git tag -a "v1.0-phase1-complete" -m "Phase 1 with -s/-u/-m parameters"
```

### 2. é•¿æœŸç¨³å®šæ–¹æ¡ˆ
1. **åˆå¹¶åˆ°ä¸»åˆ†æ”¯**ï¼šå°†éªŒè¯è¿‡çš„åŠŸèƒ½åˆå¹¶åˆ° main
2. **åˆ›å»ºå‘å¸ƒåˆ†æ”¯**ï¼šå»ºç«‹ release/1.0 åˆ†æ”¯ç”¨äºç”Ÿäº§
3. **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–°ç”¨æˆ·æ–‡æ¡£è¯´æ˜æ–°å‚æ•°
4. **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šæ·»åŠ å‚æ•°æµ‹è¯•ç”¨ä¾‹

---

## å…­ã€é¢„é˜²æªæ–½

### é¿å…æœªæ¥ç±»ä¼¼é—®é¢˜çš„å»ºè®®

1. **åˆ†æ”¯ç®¡ç†è§„èŒƒ**
   - åŠŸèƒ½å¼€å‘åœ¨ feature/* åˆ†æ”¯
   - æµ‹è¯•éªŒè¯åœ¨ test/* åˆ†æ”¯
   - ç”Ÿäº§è¿è¡Œä» main æˆ– release/* åˆ†æ”¯

2. **éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•**
   ```bash
   # éƒ¨ç½²å‰å¿…é¡»éªŒè¯
   [ ] å‚æ•°å¸®åŠ©ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
   [ ] æ–°å‚æ•°åŠŸèƒ½æµ‹è¯•é€šè¿‡
   [ ] ä¸ç°æœ‰åŠŸèƒ½å…¼å®¹æ€§ç¡®è®¤
   [ ] æ–‡æ¡£å·²æ›´æ–°
   ```

3. **ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥**
   - ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
   - ä¸ºæ¯ä¸ªåŠŸèƒ½å‘å¸ƒåˆ›å»ºæ ‡ç­¾
   - ç»´æŠ¤ CHANGELOG.md

---

## ä¸ƒã€æŠ€æœ¯å€ºåŠ¡æ¸…ç†

### å‘ç°çš„å¾…ä¼˜åŒ–é¡¹

1. **å‚æ•°å®ç°åˆ†æ•£**
   - å½“å‰ï¼šå‚æ•°å®šä¹‰åœ¨ webfetcher.py
   - å»ºè®®ï¼šåˆ›å»ºç‹¬ç«‹çš„ cli/arguments.py æ¨¡å—

2. **ç¼ºå°‘å‚æ•°éªŒè¯**
   - å½“å‰ï¼šä¾èµ– argparse åŸºç¡€éªŒè¯
   - å»ºè®®ï¼šæ·»åŠ ä¸šåŠ¡é€»è¾‘éªŒè¯å±‚

3. **é…ç½®ç®¡ç†ä¸ç»Ÿä¸€**
   - å½“å‰ï¼šé…ç½®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶
   - å»ºè®®ï¼šç»Ÿä¸€é…ç½®ç®¡ç†ç³»ç»Ÿ

---

## å…«ã€æ€»ç»“

### é—®é¢˜è¯Šæ–­
âœ… **å·²ç¡®è®¤æ ¹æœ¬åŸå› **ï¼šå½“å‰è¿è¡Œçš„ä»£ç åˆ†æ”¯ï¼ˆtest-phase1-paramsï¼‰ä¸åŒ…å«å¼€å‘çš„æ–°å‚æ•°åŠŸèƒ½

### è§£å†³è·¯å¾„
âœ… **æ˜ç¡®è§£å†³æ–¹æ¡ˆ**ï¼šåˆ‡æ¢åˆ° feature/config-driven-phase1 åˆ†æ”¯å³å¯ç«‹å³å¯ç”¨å‚æ•°

### æ‰§è¡Œå»ºè®®
âš¡ **ç«‹å³è¡ŒåŠ¨**ï¼šæ‰§è¡Œæ–¹æ¡ˆAï¼ˆåˆ‡æ¢åˆ†æ”¯ï¼‰å¯åœ¨5åˆ†é’Ÿå†…è§£å†³é—®é¢˜

### é•¿æœŸæ”¹è¿›
ğŸ“‹ **æµç¨‹ä¼˜åŒ–**ï¼šå»ºç«‹æ›´ä¸¥æ ¼çš„åˆ†æ”¯ç®¡ç†å’Œéƒ¨ç½²æµç¨‹ï¼Œé¿å…ç‰ˆæœ¬ä¸ä¸€è‡´

---

## é™„å½•ï¼šå‘½ä»¤é€ŸæŸ¥

```bash
# å¿«é€Ÿä¿®å¤
git checkout feature/config-driven-phase1

# éªŒè¯ä¿®å¤
wf --help | grep -E "(-s|--selenium|-u|--urllib)"

# åŠŸèƒ½æµ‹è¯•
wf https://example.com -s  # Seleniumæ¨¡å¼
wf https://example.com -u  # urllibæ¨¡å¼
wf https://example.com -m auto  # è‡ªåŠ¨æ¨¡å¼

# å›æ»šï¼ˆå¦‚éœ€è¦ï¼‰
git checkout test-phase1-params
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-09-26  
**ä¸‹æ¬¡å¤æŸ¥æ—¶é—´**: éƒ¨ç½²å®Œæˆå